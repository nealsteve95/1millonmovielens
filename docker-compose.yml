services:
  mssql:
    build:
      context: .
    ports:
      - "1433:1433"
    environment:
      - SA_PASSWORD=12345678
      - ACCEPT_EULA=Y
    command:
      - /bin/bash -c "/opt/mssql/bin/sqlservr & sleep 30 && /opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P '12345678' -d master -i /var/opt/mssql/app/init.sql"
    volumes:
      - ./init.sql:/var/opt/mssql/app/init.sql
      - ./data:/var/opt/mssql/app/data
